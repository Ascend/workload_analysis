# TopK算子自验测试报告

## 概述
### 约束条件
+ 本报告由华为公司提供，用于描述相应特性的测试过程及结果。报告及内容版权归华为公司所有，非经授权，不可泄露给第三方。
+ 本报告部分章节为可选，请仔细阅读并填写正确的章节，对内容有疑问请及时联系华为众智接口人。
### 软件版本
+ CANN：5.0.4
### 测试目标
+ 验证TopK算子建模的训练过程及推理结果。
## 模型功能验证
### 执行入口脚本
`python  topk/builder.py`

### 结果分析
#### 样本分布（数据采集正常必写，异常请忽略）
在此处说明数据采集的结果（以表格的形式呈现）

样本总数2000

样本分布如下

| 变量 | x                                                       | k                                                  | dim            | largest          | sorted           | values                                                  | indices                                               |
| ---- | ------------------------------------------------------- | -------------------------------------------------- | -------------- | ---------------- | ---------------- | ------------------------------------------------------- | ----------------------------------------------------- |
| 范围 | datatype: **float16** ,format: **ND** ,shape: **1D~5D** | datatype: **int32** ,format: **ND** ,shape: **0D** | 默认值仅为：-1 | 默认值仅为：True | 默认值仅为：True | datatype: **float16** ,format: **ND** ,shape: **1D~5D** | datatype: **int32** ,format: **ND** ,shape: **1D~5D** |

#### 建模结果（数据采集正常且建模精度达标必写，其余请忽略）
+ 说明最终使用的模型（包括超参数）及使用的算子特征
  + 选择XGBoost模型进行建模{learning_rate=0.10, n_estimators=500, max_depth=4, subsample=1, colsample_bytree=0.9}
  + 使用5个特征进行建模（x_size, x_last, values_size, x_fron, values_last）
+ 说明模型的训练及测试精度
  该章节内容以表格的形式呈现，参考的表格如下，其中不同建模场景指对算子样本空间的划分（如示例Add算子按datatype进行建模场景区分）

| 建模场景 | 训练集大小 | 80_percentage_error(取k折交叉验证的平均值) | 测试集大小 | 80_percentage_error | 模型超参数 |
|------|-------|----------------------------------|-------|---------------------|------|
|  场景 1   | 2000 | 0.0498092 | 200 | 0.051373 | learning_rate=0.10，n_estimators=500，max_depth=4，subsample=1，colsample_bytree=0.9 |

### 测试结论
+ 算子性能评估模型训练成功，且建模精度达标。