# TopK算子自验测试报告

## 概述
### 约束条件
+ 本报告由华为公司提供，用于描述相应特性的测试过程及结果。报告及内容版权归华为公司所有，非经授权，不可泄露给第三方。
+ 本报告部分章节为可选，请仔细阅读并填写正确的章节，对内容有疑问请及时联系华为众智接口人。
### 软件版本
+ CANN：5.0.4
### 测试目标
+ 验证AvgPool3D算子建模的训练过程及推理结果。
## 模型功能验证
### 执行入口脚本
`python  avg_pool_3d/builder.py`

### 结果分析
#### 样本分布（数据采集正常必写，异常请忽略）
在此处说明数据采集的结果（以表格的形式呈现）
+ 样本总量为2310
+ 样本分布如下

参考的表格如下

| 变量 | x                                                              | y                                                              | ksize                                                                | strides                                                               | pads                     | ceil_mode       | count_include_pad  | divisor_override    | data_format         |
| ---- | ------------------------------------------------------------- | -------------------------------------------------------------- | --------------------------------------------------------------------- | --------------------------------------------------------------------- | ------------------------ | ---------------- | ------------------ | ------------------- | ------------------- |
| 范围 | datatype: **float16** ,format: **NCDHW或NDHWC** ,shape: **5D** | datatype: **float16** ,format: **NCDHW或NDHWC** ,shape: **5D** | datatype: **int32** ,format: **DHW** ,shape: **3D** ,range: **[1,7]** | datatype: **int32** ,format: **DHW** ,shape: **3D** ,range: **[1,7]** | 默认值仅为：[0,0,0,0,0,0] | 默认值仅为：False | 默认值仅为：True    | 默认值仅为：False    | **'NCDHW'或'NDHWC'**    |

#### 建模精度异常分析（数据采集正常且建模精度不达标必写，其余请忽略）
部分算子由于底层实现的复杂性，开发者难以建立达到目标精度的性能评估模型。开发者在与众智接口人协商确认后，可以启动异常验收流程。本章节为此异常验收流程的主要交付内容之一。
+ 说明建模过程中尝试过的各个模型（包括超参数）及使用的算子特征
+ 说明各模型的训练及测试精度

| 建模场景                                        | 训练集大小 | 80_percentage_error(取k折交叉验证的平均值) | 测试集大小 | 80_percentage_error | 模型超参数 | 算子特征                                                                                       |
|---------------------------------------------|-------|---------------------------------|-------|---------------------|------|--------------------------------------------------------------------------------------------|
|  xgboost模型   | 10000      | 0.306590                                | 2000        | 0.311906            | learning_rate=0.10，n_estimators=625，max_depth=6，subsample=0.6，colsample_bytree=1 | flops,N,Cin,x_size,k_size,s_size,x_d,x_h,x_w,y_d,y_h,y_w,k_d,k_h,k_w,s_d,s_h,s_w,data_famat,y_size |
|  RandomForest   | 10000      | 0.4371816                                | 2000        | 0.441056            | n_estimators=625,max_depth=6 | flops,N,Cin,x_size,k_size,s_size,x_d,x_h,x_w,y_d,y_h,y_w,k_d,k_h,k_w,s_d,s_h,s_w,data_famat,y_size |
|  ExtraTrees模型   | 10000      | 0.329364                                | 2000        | 0.32182            | n_estimators=625,max_depth=6 | flops,N,Cin,x_size,k_size,s_size,x_d,x_h,x_w,y_d,y_h,y_w,k_d,k_h,k_w,s_d,s_h,s_w,data_famat,y_size |

### 测试结论
+ 算子性能评估模型训练成功，但建模精度不达标。